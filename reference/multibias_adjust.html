<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simultaneously adjust for multiple biases — multibias_adjust • multibias</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simultaneously adjust for multiple biases — multibias_adjust"><meta name="description" content="multibias_adjust returns the exposure-outcome odds ratio and confidence
interval, adjusted for one or more biases."><meta property="og:description" content="multibias_adjust returns the exposure-outcome odds ratio and confidence
interval, adjusted for one or more biases."><meta property="og:image" content="http://www.paulbrendel.com/multibias/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">multibias</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/multibias.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/faq.html">FAQ</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes"><li><a class="dropdown-item" href="../articles/nhanes_example.html">NHANES Example</a></li>
    <li><a class="dropdown-item" href="../articles/evans_example.html">Evans Example</a></li>
    <li><a class="dropdown-item" href="../articles/multibias_validation.html">Multibias Validation</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pcbrendel/multibias/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simultaneously adjust for multiple biases</h1>
      <small class="dont-index">Source: <a href="https://github.com/pcbrendel/multibias/blob/v1.7.2/R/multibias_adjust.R" class="external-link"><code>R/multibias_adjust.R</code></a></small>
      <div class="d-none name"><code>multibias_adjust.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>multibias_adjust</code> returns the exposure-outcome odds ratio and confidence
interval, adjusted for one or more biases.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">multibias_adjust</span><span class="op">(</span></span>
<span>  <span class="va">data_observed</span>,</span>
<span>  data_validation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bias_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bootstrap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bootstrap_reps <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-observed">data_observed<a class="anchor" aria-label="anchor" href="#arg-data-observed"></a></dt>
<dd><p>Object of class <code>data_observed</code> corresponding to the
data to perform bias analysis on.</p></dd>


<dt id="arg-data-validation">data_validation<a class="anchor" aria-label="anchor" href="#arg-data-validation"></a></dt>
<dd><p>Object of class <code>data_validation</code> corresponding to
the validation data used to adjust for bias in the observed data. The
validation data should have data for the same variables as in
<code>data_observed</code>, plus data for the missing variables leading to bias.</p></dd>


<dt id="arg-bias-params">bias_params<a class="anchor" aria-label="anchor" href="#arg-bias-params"></a></dt>
<dd><p>Object of class 'bias_params' corresponding to the
bias parameters used to adjust for bias in the observed data. There must
be parameters corresponding to the bias or biases specified in
<code>data_observed</code>.</p></dd>


<dt id="arg-bootstrap">bootstrap<a class="anchor" aria-label="anchor" href="#arg-bootstrap"></a></dt>
<dd><p>Boolean for whether to perform bootstrapping to obtain
the estimate and confidence interval.</p></dd>


<dt id="arg-bootstrap-reps">bootstrap_reps<a class="anchor" aria-label="anchor" href="#arg-bootstrap-reps"></a></dt>
<dd><p>Integer number of bootstrap samples to run in
bootstrapping.</p></dd>


<dt id="arg-level">level<a class="anchor" aria-label="anchor" href="#arg-level"></a></dt>
<dd><p>Value from 0-1 representing the full range of the confidence
interval. Default is 0.95.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list including: the bias-adjusted effect estimate of the exposure
on the outcome, the standard error, and the confidence interval as the
vector: (lower bound, upper bound).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Bias adjustment can be performed by inputting either a validation dataset or
the necessary bias parameters. Values for the bias parameters
can be applied as fixed values or as single draws from a probability
distribution (ex: <code>rnorm(1, mean = 2, sd = 1)</code>). The latter has
the advantage of allowing the researcher to capture the uncertainty
in the bias parameter estimates. To incorporate this uncertainty in the
estimate and confidence interval, this function should be run in loop across
bootstrap samples of the dataframe for analysis. The estimate and
confidence interval would then be obtained from the median and quantiles
of the distribution of odds ratio estimates.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Adjust for exposure misclassification -------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">df_observed</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_observed.html">data_observed</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df_em</span>,</span></span>
<span class="r-in"><span>  bias <span class="op">=</span> <span class="st">"em"</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"Xstar"</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"Y"</span>,</span></span>
<span class="r-in"><span>  confounders <span class="op">=</span> <span class="st">"C1"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using validation data</span></span></span>
<span class="r-in"><span><span class="va">df_validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_validation.html">data_validation</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df_em_source</span>,</span></span>
<span class="r-in"><span>  true_exposure <span class="op">=</span> <span class="st">"X"</span>,</span></span>
<span class="r-in"><span>  true_outcome <span class="op">=</span> <span class="st">"Y"</span>,</span></span>
<span class="r-in"><span>  confounders <span class="op">=</span> <span class="st">"C1"</span>,</span></span>
<span class="r-in"><span>  misclassified_exposure <span class="op">=</span> <span class="st">"Xstar"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">multibias_adjust</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_observed <span class="op">=</span> <span class="va">df_observed</span>,</span></span>
<span class="r-in"><span>  data_validation <span class="op">=</span> <span class="va">df_validation</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.999976</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.02019541</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.922358 2.080727</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using bias_params</span></span></span>
<span class="r-in"><span><span class="va">bp</span> <span class="op">&lt;-</span> <span class="fu"><a href="bias_params.html">bias_params</a></span><span class="op">(</span>coef_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.10</span>, <span class="fl">1.62</span>, <span class="fl">0.63</span>, <span class="fl">0.35</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">multibias_adjust</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_observed <span class="op">=</span> <span class="va">df_observed</span>,</span></span>
<span class="r-in"><span>  bias_params <span class="op">=</span> <span class="va">bp</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.068321</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.02009335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.988449 2.151402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adjust for three biases ---------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">df_observed</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_observed.html">data_observed</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df_uc_om_sel</span>,</span></span>
<span class="r-in"><span>  bias <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"uc"</span>, <span class="st">"om"</span>, <span class="st">"sel"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  exposure <span class="op">=</span> <span class="st">"X"</span>,</span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="st">"Ystar"</span>,</span></span>
<span class="r-in"><span>  confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"C3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using validation data</span></span></span>
<span class="r-in"><span><span class="va">df_validation</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_validation.html">data_validation</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df_uc_om_sel_source</span>,</span></span>
<span class="r-in"><span>  true_exposure <span class="op">=</span> <span class="st">"X"</span>,</span></span>
<span class="r-in"><span>  true_outcome <span class="op">=</span> <span class="st">"Y"</span>,</span></span>
<span class="r-in"><span>  confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C1"</span>, <span class="st">"C2"</span>, <span class="st">"C3"</span>, <span class="st">"U"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  misclassified_outcome <span class="op">=</span> <span class="st">"Ystar"</span>,</span></span>
<span class="r-in"><span>  selection <span class="op">=</span> <span class="st">"S"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">multibias_adjust</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_observed <span class="op">=</span> <span class="va">df_observed</span>,</span></span>
<span class="r-in"><span>  data_validation <span class="op">=</span> <span class="va">df_validation</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.040529</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.01343686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.987492 2.094982</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using bias_params</span></span></span>
<span class="r-in"><span><span class="va">bp1</span> <span class="op">&lt;-</span> <span class="fu"><a href="bias_params.html">bias_params</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  coef_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    u <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.32</span>, <span class="fl">0.59</span>, <span class="fl">0.69</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.85</span>, <span class="fl">0.71</span>, <span class="fl">1.63</span>, <span class="fl">0.40</span>, <span class="op">-</span><span class="fl">0.85</span>, <span class="fl">0.22</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    s <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.00</span>, <span class="fl">0.74</span>, <span class="fl">0.19</span>, <span class="fl">0.02</span>, <span class="op">-</span><span class="fl">0.06</span>, <span class="fl">0.02</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">multibias_adjust</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_observed <span class="op">=</span> <span class="va">df_observed</span>,</span></span>
<span class="r-in"><span>  bias_params <span class="op">=</span> <span class="va">bp1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.034682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $std.error</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.01333342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.982199 2.088556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="bias_params.html">bias_params</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  coef_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    u1y0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.20</span>, <span class="fl">0.62</span>, <span class="fl">0.01</span>, <span class="op">-</span><span class="fl">0.08</span>, <span class="fl">0.10</span>, <span class="op">-</span><span class="fl">0.15</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    u0y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3.28</span>, <span class="fl">0.63</span>, <span class="fl">1.65</span>, <span class="fl">0.42</span>, <span class="op">-</span><span class="fl">0.85</span>, <span class="fl">0.26</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    u1y1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.70</span>, <span class="fl">1.22</span>, <span class="fl">1.64</span>, <span class="fl">0.32</span>, <span class="op">-</span><span class="fl">0.77</span>, <span class="fl">0.09</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    s <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.00</span>, <span class="fl">0.74</span>, <span class="fl">0.19</span>, <span class="fl">0.02</span>, <span class="op">-</span><span class="fl">0.06</span>, <span class="fl">0.02</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with bootstrapping</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">multibias_adjust</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data_observed <span class="op">=</span> <span class="va">df_observed</span>,</span></span>
<span class="r-in"><span>  bias_params <span class="op">=</span> <span class="va">bp2</span>,</span></span>
<span class="r-in"><span>  bootstrap <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  bootstrap_reps <span class="op">=</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Brendel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

